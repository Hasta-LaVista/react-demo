(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{690:function(e,t,a){},691:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJQAAACUCAMAAABC4vDmAAAAVFBMVEUAAACZmZmZmZmampqZmZmampqampqZmZmampqZmZmampqampqbm5uampqampqampqZmZmampqZmZmampqampqZmZmampqampqmpqaampqqqqqZmZlnQ6qKAAAAG3RSTlMApaDj++hplHLLmdl3ZM9u0rnd74eqfl4HwAmsQ/1EAAAB5klEQVR42u3cy46jMBSE4UMuYMAQbiGkz/u/5zhixmaBxlYLqauT+pe1+haRHEuAiKkvvpP4CvVlYa00VIc5D2u3u7ZhvYW1DKvx42BErG7KAFCqRgY8VC36aryuFeKbzr691fUM8yOsfWxt/reO6rqIuhqBqfmHGgWo8S/qLEBdiSKKqPSOR93v90qAKrLsJIwxxt6loigmAWpyIMwDmSiiiIpHVGofhMqyrBCgKgeSo/qydhG0ZtVZ0MpU8S6RRBFFVGLYqKqqJiTUVFXrbQYJ9TqQiSKKKKKIehtUXddPJFTpQJj/EoiKRFRqRKVGVGrYqDzPH0ioR543mAfyr0V9zVm0QXXIos3LYSirh2URUeYw1DKfog2qwymaXd77h04ULKrruh4J9ey6FvNAJioSUakRlRpRqWGj0G4zjQNhHshEEUUUUUR9A9W2LdRtpm/bEvNAJioSUakR9WPNqlbQWqzBe0z30G63G9D79iKNA2E+j04UUUTFIyq1D0KVZdkLUL0DCWOMsXfJGAN1m8mttXAH8tmBiCLqY1BoH+9TtM8c5rqiXON5rRLfdPXtra5nmB+7axPWPrbm6zLqKxl00x3i05mDWDyUEbHDPuri26IuoS7MTVjbDSqs5Qa1uxo/1kb+AA1IgCZqo7YVAAAAAElFTkSuQmCC"},692:function(e,t,a){},928:function(e,t,a){"use strict";a.r(t);var s=a(16),n=a(22),i=a(29),o=a(28),r=a(30),c=(a(517),a(524)),l=a(0),d=a.n(l),m=a(105),p=a(45),h=a(60),u=(a(187),a(61)),g=(a(185),a(106)),f=(a(186),a(107)),v=(a(135),a(15)),I=a(13),b=a.n(I),C=a(25),y=a(390),E=(a(435),a(446)),A=a(23),S=a(667),j=(a(689),a(48)),k=a(78),q=a.n(k),O=(a(134),a(690),E.a.Panel),U=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return d.a.createElement("span",{style:e},d.a.createElement("i",null,d.a.createElement("svg",{viewBox:"0 0 1024 1024",width:"1em",height:"1em",fill:"currentColor",style:{verticalAlign:"-.125em"}},d.a.createElement("path",{d:"M715.8 493.5L335 165.1c-14.2-12.2-35-1.2-35 18.5v656.8c0 19.7 20.8 30.7 35 18.5l380.8-328.4c10.9-9.4 10.9-27.6 0-37z"}))))};function L(e){return U({position:"absolute",right:"auto",left:"0px",color:"#B4B4B4",transform:"rotate(".concat(e.isActive?90:0,"deg)"),top:0},e)}var w,V=function(e){function t(e){var a,n;return Object(s.a)(this,t),(n=Object(i.a)(this,Object(o.a)(t).call(this,e))).state=(a={backUserId:"",value:""},Object(y.a)(a,"backUserId",1),Object(y.a)(a,"deptId",1),Object(y.a)(a,"listCategory",[]),Object(y.a)(a,"secondId",0),Object(y.a)(a,"selectId",0),Object(y.a)(a,"firstId",0),Object(y.a)(a,"videoUrl","https://dev-img.oss-cn-shanghai.aliyuncs.com/6dDNGpYanaAhBfimWhuN.mp4"),Object(y.a)(a,"videoUrl1",""),Object(y.a)(a,"isShow",!0),Object(y.a)(a,"firstImg",""),Object(y.a)(a,"videoLength",""),Object(y.a)(a,"title",""),Object(y.a)(a,"shieldList",[]),a),n.getShieldList=Object(C.a)(b.a.mark(function e(){var t,a,s,n=arguments;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:1,a=n.length>1&&void 0!==n[1]?n[1]:1e6,s=Object(A.a)("getShieldList","post",{pageNo:t,pageSize:a}),e.abrupt("return",s);case 4:case"end":return e.stop()}},e)})),n.onChange=function(e){n.setState({title:e.target.value})},n.expandIcon=function(){return d.a.createElement("span",null,d.a.createElement(v.a,{type:"caret-right"}),d.a.createElement(v.a,{type:"caret-left"}))},n.onCollapseChange=function(e){console.log(e),n.setState({selectId:e})},n.onChangeSecond=function(e,t){console.log(e,t);for(var a=n.state.listCategory,s=0;s<a.length;s++)for(var i=a[s],o=0;o<i.list.length;o++){var r=i.list[o];e==s&&t==o?(r.isCheck=!r.isCheck,i.isCheck=!r.isCheck,n.setState({secondId:r.isCheck?r.id:0,firstId:r.isCheck?i.id:0})):r.isCheck=!1}n.setState({listCategory:a})},n.onChangeFirst=function(e,t){console.log(e,t),t.preventDefault();for(var a=n.state.listCategory,s=0;s<a.length;s++){var i=a[s];e==s?(i.isCheck=!i.isCheck,n.setState({firstId:i.isCheck?i.id:0})):i.isCheck=!1;for(var o=0;o<i.list.length;o++){i.list[o].isCheck=!1,n.setState({secondId:0})}}n.setState({listCategory:a,firstId:n.state.listCategory[e].id,selectId:n.state.listCategory[e].id})},n.getVideo=function(e){var t;console.log(e.target.files),q.a.start();var a=new FormData;a.append("file",e.target.files[0]),Object(A.a)("uploadImg","post",a,{resType:2}).then(function(e){console.log(e),e.data.success?t=setInterval(function(){var a=n.refs.player.getState().player;console.log(a.readyState),a.readyState&&(clearInterval(t),q.a.done(),f.a.success("\u4e0a\u4f20\u6210\u529f\uff01"),n.setState({videoUrl:e.data.ossAddress,videoUrl1:e.data.ossAddress}),n.setState({isShow:!1}))},1e3):Object(f.a)(e.data.errorMessage)}),Object(A.a)("getVideoLength","post",a).then(function(e){console.log(e),e.data.success?n.setState({videoLength:e.data.data}):Object(f.a)(e.data.errorMessage)}),Object(A.a)("getFirstImg","post",a).then(function(e){console.log(e),e.data.success?n.setState({firstImg:e.data.data}):Object(f.a)(e.data.errorMessage)})},n.handleSubmit=function(){var e=n.props.form.getFieldsValue(["synopsis","title"]);e.title?e.synopsis?Object(A.a)("checkKeyword","post",{},{content:encodeURI(e.title+","+e.synopsis)}).then(function(t){0==t.data.data.length?n.state.videoUrl1?n.props.location.params&&n.props.location.params.id?Object(A.a)("editArticle","post",{},{articleId:n.props.location.params.id,adminId:n.state.backUserId,title:e.title,content:e.synopsis,firstImg:n.state.firstImg,videoLength:n.state.videoLength,video_url:n.state.videoUrl1,secCategoryId:0!=n.state.secondId?n.state.secondId:"",categoryId:0!=n.state.secondId?n.state.secondId:n.state.firstId,firstCategoryId:n.state.firstId}).then(function(e){e.data.errorMessage?f.a.warning(e.data.errorMessage,2,function(){n.props.history.push("/Video/Index")}):(console.log(e),f.a.success("\u4fee\u6539\u6210\u529f!"),n.props.history.go(-1))}):0!=n.state.firstId||0!=n.state.secondId?Object(A.a)("addArticle","post",{backUserId:n.state.backUserId,content:e.synopsis,firstImg:n.state.firstImg,status:"1",title:e.title,type:2,videoLength:n.state.videoLength,video_url:n.state.videoUrl1,deptId:n.state.deptId,secCategoryId:0!=n.state.secondId?n.state.secondId:"",categoryId:0!=n.state.secondId?n.state.secondId:n.state.firstId,firstCategoryId:n.state.firstId}).then(function(e){e.data.errorMessage?f.a.warning(e.data.errorMessage,2,function(){n.props.history.push("/Video/Index")}):(console.log(e),f.a.success("\u6dfb\u52a0\u6210\u529f\uff0c\u7b49\u5f85\u5ba1\u6838\u4e2d..."),n.props.history.push("/Video/Index"))}):f.a.warning("\u8bf7\u9009\u62e9\u7c7b\u76ee\uff01"):f.a.warning("\u8bf7\u4e0a\u4f20\u89c6\u9891\uff01"):f.a.warning("".concat(t.data.data.join(","),"\u662f\u5173\u952e\u5b57\uff0c\u8bf7\u5220\u9664\u5bf9\u5e94\u4e2d\u7684\u5173\u952e\u8bcd"))}):f.a.warning("\u8bf7\u8f93\u5165\u6587\u7ae0\u7b80\u4ecb!"):f.a.warning("\u8bf7\u8f93\u5165\u6587\u7ae0\u6807\u9898!")},n.delete=function(){n.refs.file.value="",n.setState({isShow:!0,videoUrl1:"",firstImg:"",videoLength:""})},n}return Object(r.a)(t,e),Object(n.a)(t,[{key:"componentWillMount",value:function(){var e=this,t=JSON.parse(Object(j.c)().split("?")[0]);this.setState({backUserId:t.backUserId,deptId:t.deptId}),this.props.location.params&&this.props.location.params.id&&Object(A.a)("getArticleInfo","post",{},{articleId:this.props.location.params.id}).then(function(t){t.data.errorMessage?f.a.warning(t.data.errorMessage,2,function(){e.props.history.push("/Video/Index")}):(console.log(t),e.props.form.setFieldsValue({name:t.data.data.content,title:t.data.data.title}),e.setState({videoUrl:t.data.data.videoUrl,videoUrl1:t.data.data.videoUrl,secondId:t.data.data.secondCateId?t.data.data.secondCateId:0,firstId:t.data.data.firstCateId,value:t.data.data.content,title:t.data.data.title,isShow:!1,videoLength:t.data.videoLength,firstImg:t.data.data.firstImg,selectId:t.data.data.firstCateId}))}),Object(A.a)("listCategory","post",{},{type:2,status:1}).then(function(t){if(t.data.errorMessage)f.a.warning(t.data.errorMessage);else{for(var a=t.data.data,s=0;s<a.length;s++){var n=a[s];n.isCheck=!1;for(var i=0;i<n.list.length;i++){n.list[i].isCheck=!1}}e.setState({listCategory:a})}}),this.getShieldList().then(function(t){t.data.success&&e.setState({shieldList:t.data.list})})}},{key:"componentDidMount",value:function(){q.a.done()}},{key:"componentWillUnmount",value:function(){q.a.start()}},{key:"render",value:function(){var e=this,t=this.props.form.getFieldDecorator;return d.a.createElement("div",{id:"editVideo"},d.a.createElement("div",{className:"content"},d.a.createElement("div",{className:"videoContent"},d.a.createElement("div",{className:"videoBox"},d.a.createElement("div",{className:this.state.isShow?"addVideo":"addVideo hide"},d.a.createElement("div",{className:"text"},d.a.createElement("img",{src:a(691),alt:""}),d.a.createElement("span",null,"\u4e0a\u4f20\u89c6\u9891")),d.a.createElement("input",{type:"file",accept:"video/*",ref:"file",onChange:this.getVideo})),d.a.createElement("div",{className:"video"},d.a.createElement(S.Player,{ref:"player",fluid:!1,src:this.state.videoUrl,width:"100%",height:331},d.a.createElement(S.BigPlayButton,{position:"center"})),d.a.createElement("span",{className:"delete",onClick:this.delete},d.a.createElement("i",null,d.a.createElement("svg",{viewBox:"0 0 1024 1024",width:"1em",height:"1em",fill:"currentColor",style:{verticalAlign:"-.125em"}},d.a.createElement("path",{d:"M677.647059 256l0-90.352941c0-37.436235-23.461647-60.235294-61.771294-60.235294L408.094118 105.411765c-38.249412 0-61.741176 22.799059-61.741176 60.235294l0 90.352941-180.705882 0 0 60.235294 60.235294 0 0 512c0 54.272 33.972706 90.352941 90.352941 90.352941l391.529412 0c55.085176 0 90.352941-33.490824 90.352941-90.352941l0-512 60.235294 0 0-60.235294L677.647059 256zM406.588235 165.647059l210.823529 0-1.264941 90.352941L406.588235 256 406.588235 165.647059zM737.882353 858.352941l-451.764706 0 0-542.117647 451.764706 0L737.882353 858.352941zM466.823529 376.470588l-58.729412 0-1.505882 391.529412 60.235294 0L466.823529 376.470588zM617.411765 376.470588l-60.235294 0 0 391.529412 60.235294 0L617.411765 376.470588z"}))))))),d.a.createElement("div",{className:"title"},"\u7b80\u4ecb"),d.a.createElement("div",{className:"textArea synopsis"},d.a.createElement(u.a,null,d.a.createElement(u.a.Item,{label:""},t("synopsis",{initialValue:this.state.value})(d.a.createElement(g.a,{placeholder:"\u8bf7\u8f93\u5165\u6587\u7ae0\u7b80\u4ecb",autocomplete:"off"}))))),d.a.createElement("div",{className:"title"},"\u6807\u9898"),d.a.createElement("div",{className:"textArea "},d.a.createElement(u.a,null,d.a.createElement(u.a.Item,{label:""},t("title",{initialValue:this.state.title})(d.a.createElement(g.a,{placeholder:"\u8bf7\u8f93\u5165\u6587\u7ae0\u6807\u9898",autocomplete:"off",onChange:this.onChange,maxLength:50}))),d.a.createElement("div",{className:"textLength"},this.state.title.length,"/50"))),d.a.createElement("div",{className:"title"},"\u9009\u62e9\u7c7b\u76ee"),d.a.createElement("div",{className:"columnList"},d.a.createElement(E.a,{accordion:"true",defaultActiveKey:this.state.selectId?this.state.selectId.toString():"0",activeKey:[this.state.selectId?this.state.selectId.toString():"0"],expandIcon:L,bordered:!1,showArrow:!1,onChange:this.onCollapseChange},this.state.listCategory.map(function(t,a){return t.list.length>0?d.a.createElement(O,{header:d.a.createElement("span",{className:"first",key:t.id},t.name),key:t.id},d.a.createElement("div",null,t.list&&t.list.map(function(t,s){if(t&&t.name)return d.a.createElement("span",{className:"second",onClick:function(){e.onChangeSecond(a,s)},key:t.id},t.id==e.state.secondId?d.a.createElement(v.a,{type:"check-circle",theme:"filled"}):d.a.createElement("span",{className:"icon"}),t.name)}))):1!=t.id?d.a.createElement("div",{className:"firstColumn",key:t.id},d.a.createElement("span",{className:"second",onClick:function(t){e.onChangeFirst(a,t)}},t.id==e.state.firstId?d.a.createElement(v.a,{type:"check-circle",theme:"filled"}):d.a.createElement("span",{className:"icon"}),t.name)):void 0}))),d.a.createElement("div",{className:"btn"},d.a.createElement("span",{className:"submit",onClick:this.handleSubmit},"\u53d1\u5e03"),d.a.createElement("span",{className:"cancel",onClick:this.setCancel},"\u53d6\u6d88"))))}}]),t}(d.a.Component),N=u.a.create()(V),M=(a(692),Object(p.a)(function(){return Promise.all([a.e(4),a.e(33)]).then(a.bind(null,617))}),Object(p.a)(function(){return Promise.all([a.e(4),a.e(27)]).then(a.bind(null,929))})),x=(c.a.Header,c.a.Content,c.a.Footer,c.a.Sider,Object(m.inject)("headerStore")(w=Object(m.observer)(w=function(e){function t(e){var a;return Object(s.a)(this,t),a=Object(i.a)(this,Object(o.a)(t).call(this,e)),console.log(a.props),a.props.headerStore.setCurrunt("/Video/Index"),a}return Object(r.a)(t,e),Object(n.a)(t,[{key:"render",value:function(){return d.a.createElement("div",{id:"Video"},d.a.createElement(h.d,null,d.a.createElement(h.b,{path:"/Video/Index",component:M}),d.a.createElement(h.b,{path:"/Video/Edit",component:N})))}}]),t}(d.a.Component))||w)||w);t.default=x}}]);
//# sourceMappingURL=28.1569c905.chunk.js.map