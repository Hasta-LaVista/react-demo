(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{693:function(e,t,a){},694:function(e,t,a){},790:function(e,t,a){},791:function(e,t,a){},927:function(e,t,a){"use strict";a.r(t);var n,r=a(16),c=a(22),s=a(29),i=a(28),o=a(30),l=a(0),d=a.n(l),u=a(105),m=a(60),h=(a(517),a(524)),p=a(45),g=(a(693),Object(p.a)(function(){return Promise.all([a.e(0),a.e(1),a.e(6),a.e(24)]).then(a.bind(null,915))})),f=Object(p.a)(function(){return Promise.all([a.e(0),a.e(7),a.e(29)]).then(a.bind(null,916))}),b=Object(p.a)(function(){return Promise.all([a.e(0),a.e(1),a.e(2),a.e(3),a.e(16)]).then(a.bind(null,917))}),C=Object(p.a)(function(){return Promise.all([a.e(0),a.e(30)]).then(a.bind(null,918))}),v=Object(p.a)(function(){return Promise.all([a.e(0),a.e(1),a.e(2),a.e(3),a.e(17)]).then(a.bind(null,919))}),I=Object(p.a)(function(){return Promise.all([a.e(0),a.e(1),a.e(2),a.e(3),a.e(18)]).then(a.bind(null,920))}),E=function(e){function t(e){return Object(r.a)(this,t),Object(s.a)(this,Object(i.a)(t).call(this,e))}return Object(o.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return d.a.createElement("div",{id:"contentArticle"},d.a.createElement(m.d,null,d.a.createElement(m.b,{path:"/Article/Index/HomePage",component:g}),d.a.createElement(m.b,{exact:!0,path:"/Article/Index/Column",component:f}),d.a.createElement(m.b,{exact:!0,path:"/Article/Index/ExamineDept",component:I}),d.a.createElement(m.b,{exact:!0,path:"/Article/Index/ExamineColumn",component:v}),d.a.createElement(m.b,{exact:!0,path:"/Article/Index/Banner",component:C}),d.a.createElement(m.b,{exact:!0,path:"/Article/Index",component:b})))}}]),t}(d.a.Component),y=(a(185),a(106)),S=(a(188),a(108)),k=(a(434),a(445)),j=a(46),O=a(23),x=(a(694),k.a.TabPane,S.b.SubMenu,y.a.Search),w=function(e){function t(e){return Object(r.a)(this,t),Object(s.a)(this,Object(i.a)(t).call(this,e))}return Object(o.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return d.a.createElement("div",{id:"Slider"},d.a.createElement("div",{className:"search"},d.a.createElement(x,{placeholder:"\u641c\u7d22",onSearch:this.getSearch,style:{width:"91.95%"}})),d.a.createElement("div",{className:"listLink"},d.a.createElement(j.c,{to:"/Article/Index",exact:!0,activeClassName:"link-active"},d.a.createElement("p",null,"\u5168\u90e8\u6587\u7ae0")),d.a.createElement(j.c,{to:"/Article/Index/ExamineDept"},d.a.createElement("p",null,"\u5f85\u5ba1\u6838"),d.a.createElement(j.c,{to:"/Article/Index/ExamineDept",activeClassName:"link-active"},d.a.createElement("p",null,"\u90e8\u95e8\u5ba1\u6838")),d.a.createElement(j.c,{to:"/Article/Index/ExamineColumn",activeClassName:"link-active"},d.a.createElement("p",null,"\u680f\u76ee\u5ba1\u6838"))),d.a.createElement(j.c,{to:"/Article/Index/HomePage",activeClassName:"link-active"},d.a.createElement("p",null,"\u9996\u9875\u7ba1\u7406")),d.a.createElement(j.c,{to:"/Article/Index/Column",activeClassName:"link-active"},d.a.createElement("p",null,"\u680f\u76ee\u7ba1\u7406")),d.a.createElement(j.c,{to:"/Article/Index/Banner",activeClassName:"link-active"},d.a.createElement("p",null,"\u8f6e\u64ad\u7ba1\u7406"))))}}]),t}(d.a.Component),A=(h.a.Header,h.a.Content),N=(h.a.Footer,h.a.Sider),M=Object(u.inject)("articleStore")(n=Object(u.observer)(n=function(e){function t(e){return Object(r.a)(this,t),Object(s.a)(this,Object(i.a)(t).call(this,e))}return Object(o.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return d.a.createElement("div",{className:"container"},d.a.createElement(h.a,{style:{background:"#fff",width:"100%"}},d.a.createElement(N,{width:"24%",style:{background:"#F4F6F8"}},d.a.createElement(w,null)),d.a.createElement(A,{style:{background:"#fff",flex:1,width:"76%"}},d.a.createElement(E,null))))}}]),t}(d.a.Component))||n)||n,U=(a(695),a(909)),L=(a(525),a(556)),F=(a(187),a(61)),P=(a(135),a(15)),B=a(13),K=a.n(B),T=a(25),D=(a(186),a(107)),R=(a(435),a(446)),z=a(78),H=a.n(z),V=a(527),J=a(48),W=a(786),_=a(787),q=a.n(_),G=a(788),Q=a.n(G),X=(a(789),a(134),a(790),y.a.TextArea,R.a.Panel),Y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};arguments.length>1&&arguments[1],arguments.length>2&&arguments[2];return d.a.createElement("span",{style:e},d.a.createElement("i",null,d.a.createElement("svg",{viewBox:"0 0 1024 1024",width:"1em",height:"1em",fill:"currentColor",style:{verticalAlign:"-.125em"}},d.a.createElement("path",{d:"M715.8 493.5L335 165.1c-14.2-12.2-35-1.2-35 18.5v656.8c0 19.7 20.8 30.7 35 18.5l380.8-328.4c10.9-9.4 10.9-27.6 0-37z"}))))};function Z(e){return Y({position:"absolute",right:"auto",left:"0px",color:"#B4B4B4",transform:"rotate(".concat(e.isActive?90:0,"deg)"),top:0},e)}var $,ee=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(s.a)(this,Object(i.a)(t).call(this,e))).state={editorState:V.EditorState.createEmpty(),contentState:"",value:"",backUserId:1,deptId:1,listCategory:[],secondId:0,firstId:0,selectId:0,imgUrl:[],shieldList:[]},a.onEditorStateChange=function(e){a.setState({editorState:e})},a.onContentStateChange=function(e){var t=[];if(a.state.shieldList.map(function(e){-1!=q()(Object(V.convertToRaw)(a.state.editorState.getCurrentContent())).indexOf(e.searchKey)&&t.push(e.searchKey)}),t.length>0)D.a.warning("".concat(t.join(","),"\u662f\u5173\u952e\u5b57\uff0c\u8bf7\u5220\u9664\u5185\u5bb9\u4e2d\u7684\u5173\u952e\u8bcd"));else if(a.setState({contentState:e}),e.entityMap&&e.entityMap[0]){var n=a.state.imgUrl;n.push(e.entityMap[0].data.src),a.setState({imgUrl:n})}},a.getShieldList=Object(T.a)(K.a.mark(function e(){var t,a,n,r=arguments;return K.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:1,a=r.length>1&&void 0!==r[1]?r[1]:1e6,n=Object(O.a)("getShieldList","post",{pageNo:t,pageSize:a}),e.abrupt("return",n);case 4:case"end":return e.stop()}},e)})),a.uploadImageCallBack=function(){var e=Object(T.a)(K.a.mark(function e(t){return K.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.abrupt("return",new Promise(function(e,a){var n=new FormData;n.append("file",t),Object(O.a)("uploadImg","post",n,{resType:1}).then(function(t){console.log(t),t.data.success?e({data:{link:t.data.ossAddress}}):a(t.data.errorMessage)})}));case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.handleSubmit=function(){var e=a.props.form.getFieldsValue(["name"]);console.log(q()(Object(V.convertToRaw)(a.state.editorState.getCurrentContent()))),e.name?Object(O.a)("checkKeyword","post",{},{content:encodeURI(e.name+q()(Object(V.convertToRaw)(a.state.editorState.getCurrentContent())))}).then(function(t){0==t.data.data.length?(console.log(t),a.state.contentState&&""!=a.state.contentState.blocks[0].text?a.props.location.params&&a.props.location.params.id?Object(O.a)("editArticle","post",{},{articleId:a.props.location.params.id,adminId:a.state.backUserId,title:e.name,content:a.state.editorState?encodeURI(q()(Object(V.convertToRaw)(a.state.editorState.getCurrentContent()))):"",firstImg:a.state.imgUrl[0],secCategoryId:0!=a.state.secondId?a.state.secondId:"",categoryId:0!=a.state.secondId?a.state.secondId:a.state.firstId,firstCategoryId:a.state.firstId}).then(function(e){e.data.errorMessage?D.a.warning(e.data.errorMessage,2,function(){a.props.history.push("/Article/Index")}):(console.log(e),D.a.success("\u4fee\u6539\u6210\u529f\uff01"),a.props.history.push("/Article/Index"))}):0!=a.state.firstId||0!=a.state.secondId?(console.log(a.state.imgUrl[0]),Object(O.a)("addArticle","post",{backUserId:a.state.backUserId,content:a.state.editorState?q()(Object(V.convertToRaw)(a.state.editorState.getCurrentContent())):"",firstImg:a.state.imgUrl[0],status:"1",title:e.name,type:1,videoLength:"",video_url:"",deptId:a.state.deptId,secCategoryId:0!=a.state.secondId?a.state.secondId:"",categoryId:0!=a.state.secondId?a.state.secondId:a.state.firstId,firstCategoryId:a.state.firstId}).then(function(e){e.data.errorMessage?D.a.warning(e.data.errorMessage,2,function(){a.props.history.push("/Article/Index")}):(console.log(e),D.a.success("\u6dfb\u52a0\u6210\u529f\uff0c\u7b49\u5f85\u5ba1\u6838\u4e2d..."),a.props.history.push("/Article/Index"))})):D.a.warning("\u8bf7\u9009\u62e9\u7c7b\u76ee\uff01"):D.a.warning("\u8bf7\u8f93\u5165\u6587\u7ae0\u5185\u5bb9\uff01")):D.a.warning("".concat(t.data.data.join(","),"\u662f\u5173\u952e\u5b57\uff0c\u8bf7\u5220\u9664\u5185\u5bb9\u4e2d\u7684\u5173\u952e\u8bcd"))}):D.a.warning("\u8bf7\u8f93\u5165\u6587\u7ae0\u6807\u9898!")},a.setCancel=function(){a.props.history.go(-1)},a.onChange=function(e){var t=[];a.state.shieldList.map(function(a){console.log(e.target.value.indexOf(a.searchKey)),-1!=e.target.value.indexOf(a.searchKey)&&t.push(a.searchKey)}),t.length>0&&D.a.warning("".concat(t.join(","),"\u662f\u5173\u952e\u5b57\uff0c\u8bf7\u5220\u9664\u5185\u5bb9\u4e2d\u7684\u5173\u952e\u8bcd")),e.target.value.length>60?a.props.form.setFieldsValue({name:a.state.value}):a.setState({value:e.target.value})},a.expandIcon=function(){return d.a.createElement("span",null,d.a.createElement(P.a,{type:"caret-right"}),d.a.createElement(P.a,{type:"caret-left"}))},a.onCollapseChange=function(e){console.log(e),a.setState({selectId:e})},a.onChangeSecond=function(e,t){console.log(e,t);for(var n=a.state.listCategory,r=0;r<n.length;r++)for(var c=n[r],s=0;s<c.list.length;s++){var i=c.list[s];e==r&&t==s?(i.isCheck=!i.isCheck,c.isCheck=!i.isCheck,a.setState({secondId:i.isCheck?i.id:0,firstId:i.isCheck?c.id:0})):i.isCheck=!1}a.setState({listCategory:n})},a.onChangeFirst=function(e,t){console.log(e,t),t.preventDefault();for(var n=a.state.listCategory,r=0;r<n.length;r++){var c=n[r];e==r?(c.isCheck=!c.isCheck,a.setState({firstId:c.isCheck?c.id:0})):c.isCheck=!1;for(var s=0;s<c.list.length;s++){c.list[s].isCheck=!1,a.setState({secondId:0})}}a.setState({listCategory:n,firstId:a.state.listCategory[e].id,selectId:a.state.listCategory[e].id})},a}return Object(o.a)(t,e),Object(c.a)(t,[{key:"componentWillMount",value:function(){var e=this,t=JSON.parse(Object(J.c)().split("?")[0]);this.setState({backUserId:t.backUserId,deptId:t.deptId}),this.props.location.params&&this.props.location.params.id&&Object(O.a)("getArticleInfo","post",{},{articleId:this.props.location.params.id}).then(function(t){if(t.data.errorMessage)D.a.warning(t.data.errorMessage,2,function(){e.props.history.push("/Article/Index")});else{console.log(t.data.data);var a=V.ContentState.createFromBlockArray(Q()(t.data.data.content)),n=V.EditorState.createWithContent(a);e.setState({editorState:n,secondId:t.data.data.secondCateId?t.data.data.secondCateId:0,firstId:t.data.data.firstCateId,selectId:t.data.data.firstCateId,value:t.data.data.title}),e.props.form.setFieldsValue({name:t.data.data.title})}}),Object(O.a)("listCategory","post",{},{type:1,status:1}).then(function(t){if(t.data.errorMessage)D.a.warning(t.data.errorMessage);else{for(var a=t.data.data,n=0;n<a.length;n++){var r=a[n];r.isCheck=!1;for(var c=0;c<r.list.length;c++){r.list[c].isCheck=!1}}e.setState({listCategory:a})}}),this.getShieldList().then(function(t){t.data.success&&e.setState({shieldList:t.data.list})})}},{key:"componentDidMount",value:function(){H.a.done()}},{key:"componentWillUnmount",value:function(){H.a.start()}},{key:"render",value:function(){var e=this,t=this.props.form.getFieldDecorator,a=this.state,n=a.editorState;a.contentState;return d.a.createElement("div",{id:"edit"},d.a.createElement(L.a,{bordered:!1,className:"card-item"},d.a.createElement(W.Editor,{editorState:n,onEditorStateChange:this.onEditorStateChange,onContentStateChange:this.onContentStateChange,wrapperClassName:"wrapper-class",editorClassName:"editor-class",toolbarClassName:"toolbar-class",localization:{locale:"zh"},toolbar:{image:{uploadCallback:this.uploadImageCallBack,alignmentEnabled:!0,alt:{present:!1,mandatory:!1}}}}),d.a.createElement("div",{className:"title"},"\u6807\u9898"),d.a.createElement("div",{className:"textArea"},d.a.createElement(F.a,null,d.a.createElement(F.a.Item,{label:""},t("name",{initialValue:this.state.value})(d.a.createElement(y.a,{placeholder:"\u8bf7\u8f93\u5165\u6587\u7ae0\u6807\u9898",autocomplete:"off",onChange:this.onChange,maxLength:"50"})))),d.a.createElement("div",{className:"textLength"},this.state.value.length,"/50")),d.a.createElement("div",{className:"title"},"\u9009\u62e9\u7c7b\u76ee"),d.a.createElement("div",{className:"columnList"},d.a.createElement(R.a,{defaultActiveKey:this.state.selectId?this.state.selectId.toString():"0",activeKey:[this.state.selectId?this.state.selectId.toString():"0"],accordion:!0,expandIcon:Z,bordered:!1,showArrow:!1,onChange:this.onCollapseChange},this.state.listCategory.map(function(t,a){return t.list.length>0?d.a.createElement(X,{header:d.a.createElement("span",{className:"first",key:t.id},t.name),key:t.id},d.a.createElement("div",null,t.list&&t.list.map(function(t,n){if(t&&t.name)return d.a.createElement("span",{className:"second",onClick:function(){e.onChangeSecond(a,n)}},t.id==e.state.secondId?d.a.createElement(P.a,{type:"check-circle",theme:"filled"}):d.a.createElement("span",{className:"icon"}),t.name)}))):1!=t.id?d.a.createElement("div",{className:"firstColumn"},d.a.createElement("span",{className:"second",onClick:function(t){e.onChangeFirst(a,t)}},t.id==e.state.firstId?d.a.createElement(P.a,{type:"check-circle",theme:"filled"}):d.a.createElement("span",{className:"icon"}),t.name)):void 0}))),d.a.createElement("div",{className:"btn"},d.a.createElement("span",{className:"submit",onClick:this.handleSubmit},"\u53d1\u5e03"),d.a.createElement("span",{className:"cancel",onClick:this.setCancel},"\u53d6\u6d88"))),d.a.createElement(U.a,{visibilityHeight:200,style:{right:50}}))}}]),t}(d.a.Component),te=F.a.create()(ee),ae=(a(791),Object(u.inject)("articleStore","headerStore")($=Object(u.observer)($=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(s.a)(this,Object(i.a)(t).call(this,e))).props.headerStore.setCurrunt("/Article/Index"),console.log(a.props),a}return Object(o.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return d.a.createElement("div",{id:"article"},d.a.createElement(m.d,null,d.a.createElement(m.b,{path:"/Article/Index",component:M}),d.a.createElement(m.b,{exact:!0,path:"/Article/Edit",component:te})))}}]),t}(d.a.Component))||$)||$);t.default=ae}}]);
//# sourceMappingURL=25.c915c971.chunk.js.map